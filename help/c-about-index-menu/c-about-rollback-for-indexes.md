---
description: ロールバックを使用すると、生成したWebサイトインデックスをバックアップおよびアーカイブできます。 インデックスのバックアップは、いつでも復元できます。
solution: Target
subtopic: Rollback
title: インデックスのロールバックについて
topic-legacy: Index,Site search and merchandising
uuid: abed878a-71b3-4122-9822-7410f4427a9a
exl-id: bc75f6ba-d919-4dff-8ee2-e17568892626
translation-type: tm+mt
source-git-commit: 7559f5f7437d46e3510d4659772308666425ec96
workflow-type: tm+mt
source-wordcount: '835'
ht-degree: 0%

---

# インデックス{#about-rollback-for-indexes}のロールバックについて

[!DNL Rollback]を使用して、生成したWebサイトのインデックスをバックアップおよびアーカイブできます。 インデックスのバックアップは、いつでも復元できます。

## インデックス{#concept_0BC4BC975DB045A986C3607CF32705D8}に対するロールバックの使用

アーカイブには、次の4つのインデックスが含まれています。現在のサイトインデックスと、前の3つのサイトインデックス。検索ロボットは、ロールバックの設定に基づいて自動的にアーカイブします。 Webサイトのインデックスが作成されるたびに、アーカイブが更新されます。 新しいインデックスは、既存のアーカイブ済みインデックスを置き換えるので、アーカイブは常に最新の状態に保たれます。

アーカイブされた各インデックスは、次の情報と共にアーカイブに一覧表示されます。

* インデックスが確定された日時。
* インデックスの期間。
* インデックスで指定されたドキュメントの数。
* インデックス作成操作の種類（フル、インクリメンタルなど）。
* インデックスが現在アクティブかどうか、インデックスが次のインデックスの後に保持または削除されるかどうかなど、インデックスのステータス。

Webサイトのインデックスが作成されるたびに、新しいインデックスがアーカイブに追加され、既存のアーカイブ済みインデックスが削除されます。 ただし、最も古いインデックスが削除されるとは限りません。 アーカイブに新しいインデックスを追加すると、各アーカイブ済みインデックスの年齢比較が、ロールバック構成設定で指定された年齢に対して行われます。 目的の集計表から最も遠いインデックスが削除されます。 例えば、構成設定が24,48,72で、保存されたインデックスの年齢が5、23、47、71の場合、 新しいインデックスがアーカイブに追加されると、そのインデックスの経過時間が設定から最も長くなるので、最新のインデックス（5時間経過）は削除されます。 便宜上、サイトのインデックスが再び作成されると、アーカイブに記録されたインデックスは削除されます。

インデックスをアクティブにしている間は、ユーザーインターフェイス内の他の領域に移動できます。 ステータスインジケーターは、アクティベーションの進行状況を追跡し、[!DNL Rollback]ページに表示したときに使用できます。 アーカイブされたインデックスが復元されると、フルインデックス、増分インデックス、スクリプト化インデックス、再生成ページの先頭にユーザーに通知されます。 インデックスの復元中は、インデックス作成操作を実行できません。 ロールバック操作がスケジュール済みサイトインデックスと競合する場合、スケジュール済みインデックスは、ロールバックが完了するまで延期されます。 既に進行中のインデックスは、ロールバックの受信優先度を確認すると取り消されます。

アーカイブの整合性を維持するために、検索ロボットは、クロール中にエラーが見つかった場合に、ロールバックアーカイブを更新しません。 また、ユーザーがインデックス作成操作をキャンセルした場合も、更新は行われません。 インデックス作成操作が最大時間、バイト、ページ、またはドキュメントを超える場合、クローラはインデックスを最終処理し、アーカイブに追加します。 また、インデックス作成操作中にページ数の最小値が満たされなかった場合は、クローラがインデックスをキャンセルし、前のインデックスはアクティブなままになります。

## インデックスのロールバック・アーカイブ・スケジュールの構成{#task_CD403B9AE2244B13A6B3861B5F9B055C}

[!DNL Configure]を使用して、どのインデックスファイルをロールバックアーカイブに保存するかを決定できます。 アーカイブには、現在のインデックスと3つのバックアップ・インデックスを格納できます。

**[!UICONTROL Schedule]**&#x200B;フィールドには、現在からの時間を表す3つのコンマ区切り値が含まれています。 例えば、スケジュール値24,48,72は、現在または昨日から24時間、現在または2日前から48時間、現在または3日前から72時間と指定します。

検索は、1日、2日、3日経過した時点で最も近いサイトインデックスを継続的にアーカイブします。 アーカイブされたインデックスの実際の時間と日付は、Webサイトのインデックス作成スケジュールによって異なる場合があります。

**インデックスのロールバック・アーカイブ・スケジュールを構成するには**

1. 製品メニューで、**[!UICONTROL Index]**/**[!UICONTROL Rollback]**/**[!UICONTROL Configure]**&#x200B;をクリックします。
1. [!DNL Rollback Configuration]ページの&#x200B;**[!UICONTROL Schedule]**&#x200B;フィールドに、3つのインデックスページのコマンド区切りリストを時間単位で入力します。 これらのページに最も近いインデックスが保存されます。
1. クリック **[!UICONTROL Save Changes]**.

## アーカイブされたインデックスのアクティブ化{#task_5DCE3D660F6F4197993E92AA59227332}

ロールバックを使用して、アーカイブ済みインデックスをアクティブ化できます。

**[!UICONTROL Activate]**&#x200B;をクリックしてインデックスをロールバックすると、現在アクティブなインデックスがアーカイブに移動します。

アーカイブされたインデックスのアクティベーションに続いて、[!DNL Activate Index]ページに戻ります。 インデックス・ロールバックに関する情報が表示されます。 また、[!DNL Available Indexes]テーブルの[!DNL Activate]列には、ロールバックされたインデックスが「Active Index」の状態で示されます。

1. 製品メニューで、**[!UICONTROL Index]**/**[!UICONTROL Rollback]**/**[!UICONTROL Rollback]**&#x200B;をクリックします。
1. [!DNL Activate Index]ページの[!DNL Available Indexes]テーブルで、アクティブにする関連付けられたアーカイブインデックスの種類の&#x200B;**[!UICONTROL Activate]**&#x200B;をクリックします。

   「日付」、「年齢」、「ページ」、「操作」の各列を使用すると、アクティブにするインデックスを指定できます。
1. [!DNL Verify Rollback]ページで、インデックス情報を確認し、正しいインデックスが選択されていることを確認してから、**[!UICONTROL Activate Now]**&#x200B;をクリックします。

## すべてのインデックス・ロールバックのログを表示{#task_D2D9AA7203F0465FB5AE0D49212AC41C}

すべてのロールバック関連の操作の日時を表示します。

**すべてのインデックス・ロールバックのログを表示するには**

1. 製品メニューで、次のいずれかの操作を行います。

   * **[!UICONTROL Index]**/**[!UICONTROL Re-Rank Index]**/**[!UICONTROL Live Log]**&#x200B;をクリックします。

   * **[!UICONTROL Index]**/**[!UICONTROL Re-Rank Index]**/**[!UICONTROL Staged Log]**&#x200B;をクリックします。

1. ログページの上部または下部で、次のいずれかの操作を行います。

   * **[!UICONTROL First]**、**[!UICONTROL Prev]**、**[!UICONTROL Next]**、**[!UICONTROL Last]**、または&#x200B;**[!UICONTROL Go to line]**&#x200B;のナビゲーションオプションを使用してログ内を移動します。

   * 表示オプション&#x200B;**[!UICONTROL Errors only]**、**[!UICONTROL Wrap line]**、または&#x200B;**[!UICONTROL Show]**&#x200B;を使用して、表示内容を絞り込みます。
